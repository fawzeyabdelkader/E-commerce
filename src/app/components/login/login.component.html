<main>
  <!-- section -->
  <section class="my-lg-5 my-5">
    <div class="container">
      <!-- row -->
      <div class="row justify-content-center align-items-center">
        <div class="col-12 col-md-6 col-lg-4 order-lg-1 order-2">
          <!-- img -->
          <img src="./assets/images/login.svg" alt="" class="img-fluid" />
        </div>
        <!-- col -->
        <div class="col-12 col-md-6 offset-lg-1 col-lg-4 order-lg-2 order-1">
          <div class="mb-lg-9 mb-5">
            <h1 class="mb-1 h2 fw-bold">Sign in to FreshCart</h1>
            <p class="font-sm text-secondary fw-bold">Welcome back to FreshCart! Enter your email to get started.</p>
          </div>

          <form class="needs-validation" (ngSubmit)="handelLogin(loginForm)" [formGroup]="loginForm">
            <p *ngIf="errorMessage" class="text-center text-danger">{{errorMessage}}
              <i class="fa-solid fa-xmark ms-2"></i>
            </p>
            <div class="row g-3">
              <!-- row -->
              <div class="col-12">
                <!-- input -->
                <label class="form-label visually-hidden" for="email">Email address</label>
                <input
                  [ngClass]="{'is-valid':loginForm.get('email')?.valid, 'is-invalid':loginForm.get('email')?.invalid && loginForm.get('email')?.dirty }"
                  formControlName="email" type="email" id="email" class="form-control" placeholder="Email" required />

                <div *ngIf="loginForm.get('email')?.invalid&&loginForm.get('email')?.touched" class="text-danger">
                  <p *ngIf=" loginForm.get('email')?.getError('required')" class="my-0 font-sm">email is required</p>
                  <p *ngIf=" loginForm.get('email')?.getError('email')" class="my-0 font-sm">please enter a valid email
                  </p>
                </div>

              </div>
              <div class="col-12">
                <!-- input -->
                <div class="password-field position-relative">
                  <label class="form-label visually-hidden" for="password">Password</label>
                  <input
                    [ngClass]="{'is-valid':loginForm.get('password')?.valid, 'is-invalid':loginForm.get('password')?.invalid && loginForm.get('password')?.dirty }"
                    formControlName="password" [type]="passwordFieldType" id="password" class="form-control"
                    placeholder="*****" required />
                  <div class="position-absolute top-50 end-0 translate-middle-y me-3">
                    <i class="fa"
                      [ngClass]="{'fa-eye': passwordFieldType === 'password', 'fa-eye-slash': passwordFieldType === 'text'}"
                      (click)="togglePasswordVisibility()"></i>
                  </div>

                  <div *ngIf="loginForm.get('password')?.invalid&&loginForm.get('password')?.touched"
                    class="text-danger">
                    <p *ngIf=" loginForm.get('password')?.getError('required')" class="my-0 font-sm">password is
                      required</p>
                    <p *ngIf=" loginForm.get('password')?.getError('pattern')" class="my-0 font-sm"> password start with
                      a uppercase
                      followed by at least 5 characters</p>
                  </div>
                </div>
              </div>
              <div class="d-flex justify-content-between">
                <!-- form check -->
                <div class="form-check">
                  <input formControlName="rememberMe" class="form-check-input" type="checkbox" id="flexCheckDefault" />
                  <!-- label -->
                  <label class="form-check-label text-secondary" for="flexCheckDefault">Remember me</label>
                </div>
                <div class="mx-3 text-secondary">
                  Forgot password?
                  <a class="text-main fw-bold " routerLink="/forget-password">Reset It</a>
                </div>
              </div>
              <!-- btn -->
              <div class="col-12 d-grid">
                <button [disabled]="loginForm.invalid || isLoading" class="btn bg-main text-white">
                  <span *ngIf="!isLoading">Sign In</span>
                  <span *ngIf="isLoading"><i class="fas  fa-spin fa-spinner"></i></span>
                </button>
              </div>
              <!-- link -->
              <div class="text-muted">
                Donâ€™t have an account?
                <a class="text-main fw-bold" routerLink="/register">Sign Up</a>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
</main>